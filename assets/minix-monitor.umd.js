!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.minixMonitor=t()}(this,(function(){"use strict";var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&(e[n]=t[n])},e(t,n)};function t(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}var n=function(){return n=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},n.apply(this,arguments)};function r(e,t,n,r){return new(n||(n=Promise))((function(o,i){function a(e){try{c(r.next(e))}catch(e){i(e)}}function s(e){try{c(r.throw(e))}catch(e){i(e)}}function c(e){var t;e.done?o(e.value):(t=e.value,t instanceof n?t:new n((function(e){e(t)}))).then(a,s)}c((r=r.apply(e,t||[])).next())}))}function o(e,t){var n,r,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(i){return function(s){return function(i){if(n)throw new TypeError("Generator is already executing.");for(;a;)try{if(n=1,r&&(o=2&i[0]?r.return:i[0]?r.throw||((o=r.return)&&o.call(r),0):r.next)&&!(o=o.call(r,i[1])).done)return o;switch(r=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,r=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=a.trys,(o=o.length>0&&o[o.length-1])||6!==i[0]&&2!==i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],r=0}finally{n=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}([i,s])}}}function i(e,t){var n="function"==typeof Symbol&&e[Symbol.iterator];if(!n)return e;var r,o,i=n.call(e),a=[];try{for(;(void 0===t||t-- >0)&&!(r=i.next()).done;)a.push(r.value)}catch(e){o={error:e}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return a}function a(){for(var e=[],t=0;t<arguments.length;t++)e=e.concat(i(arguments[t]));return e}var s,c,u,p,f,d,l,h,g={getTiming:function(){try{if(!window.performance||!window.performance.timing)return console.log("你的浏览器不支持 performance 操作"),null;var e=window.performance.timing;return e.loadEventEnd-e.loadEventStart<0?(setTimeout((function(){g.getTiming()}),200),null):{redirectTime:+(e.redirectEnd-e.redirectStart).toFixed(2),dnsTime:+(e.domainLookupEnd-e.domainLookupStart).toFixed(2),ttfbTime:+(e.responseStart-e.navigationStart).toFixed(2),appcacheTime:+(e.domainLookupStart-e.fetchStart).toFixed(2),unloadTime:+(e.unloadEventEnd-e.unloadEventStart).toFixed(2),tcpTime:+(e.connectEnd-e.connectStart).toFixed(2),reqTime:+(e.responseEnd-e.responseStart).toFixed(2),blankTime:+(e.domLoading-e.navigationStart).toFixed(2),analysisDomTime:+(e.domInteractive-e.domLoading).toFixed(2),analysisTime:+(e.domComplete-e.domInteractive).toFixed(2),domReadyTime:+(e.domInteractive-e.navigationStart).toFixed(2),loadPageTime:+((e.loadEventEnd||e.loadEventStart||e.domComplete||e.domLoading)-e.navigationStart).toFixed(2)}}catch(e){return console.log(e),null}},getEntries:function(e){if(e=e||[],!window.performance||!window.performance.getEntries)return console.log("该浏览器不支持performance.getEntries方法"),[];e.push("navigation");var t=[],n=window.performance.getEntries();return n&&0!=n.length?(n.forEach((function(n,r){var o;e.indexOf(n.initiatorType)>-1&&(o={name:n.name,initiatorType:n.initiatorType,nextHopProtocol:n.nextHopProtocol,redirectTime:(n.redirectEnd-n.redirectStart).toFixed(2),dnsTime:(n.domainLookupEnd-n.domainLookupStart).toFixed(2),tcpTime:(n.connectEnd-n.connectStart).toFixed(2),ttfbTime:(n.responseStart-n.requestStart).toFixed(2),responseTime:(n.responseEnd-n.responseStart).toFixed(2),reqTotalTime:(n.responseEnd-n.requestStart).toFixed(2)},t.push(o))})),t):t}},m="2.0.11";!function(e){e.JS_ERROR="H5_JS_ERROR",e.RESOURCE_ERROR="H5_RESOURCE_ERROR",e.VUE_ERROR="VUE_ERROR",e.PROMISE_ERROR="PROMISE_ERROR",e.AJAX_ERROR="AJAX_ERROR",e.CONSOLE_INFO="CONSOLE_INFO",e.CONSOLE_WARN="CONSOLE_WARN",e.CONSOLE_ERROR="CONSOLE_ERROR",e.CROSS_SCRIPT_ERROR="CROSS_SCRIPT_ERROR",e.UNKNOW_ERROR="UNKNOW_ERROR",e.PERFORMANCE="H5_PERFORMANCE",e.H5LOW_PERFORMANCE="H5LOW_PERFORMANCE",e.BLANK="H5_BLANK",e.API_ERROR="H5_API_ERROR"}(s||(s={})),function(e){e.JS_ERROR="H5_JS_ERROR",e.RESOURCE_ERROR="H5_RESOURCE_ERROR",e.BLANK="H5_BLANK",e.API_ERROR="H5_API_ERROR",e.PERFORMANCE="H5_PERFORMANCE",e.H5LOW_PERFORMANCE="H5LOW_PERFORMANCE",e.UNKNOW_ERROR="H5_UNKNOW_ERROR",e.CONSOLE_ERROR="H5_CONSOLE_ERROR"}(c||(c={})),function(e){e.ERROR="ERROR",e.WARN="WARN",e.INFO="INFO"}(u||(u={})),function(e){e.IMG="IMG",e.BridgeBuried="BridgeBuried",e.webZJSDK="webZJSDK",e.AJAX="AJAX",e.Fetch="Fetch"}(p||(p={})),function(e){e.PERFORMANCE="performance",e.JSERROR="jsError",e.WhiteScreen="WhiteScreen",e.trackEvent="trackEvent"}(f||(f={})),function(e){e.Production="production",e.Development="development",e.Test="test"}(d||(d={})),function(e){e.AXIOS="AXIOS",e.DEFAULT="DEFAULT"}(l||(l={})),function(e){e.XHR="xhr",e.FETCH="fetch"}(h||(h={}));var y=["https://iotsdk.midea.com/","sockjs-node/info"],O=[-1,-2,40400,40401,40402,40403,40404,40405,40415,40500,40501,40502,40503,40504,40429,40430,40431,40432,40433,44001,44003,40002,40001,40060,40061,40031,40580,40581,40050,40591,40592,40699];var x,v=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e,t){Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){this._state=new Int32Array(4),this._buffer=new ArrayBuffer(68),this._buffer8=new Uint8Array(this._buffer,0,68),this._buffer32=new Uint32Array(this._buffer,0,17),this.start()}return e.hashStr=function(e,t){return void 0===t&&(t=!1),this.onePassHasher.start().appendStr(e).end(t)},e.hashAsciiStr=function(e,t){return void 0===t&&(t=!1),this.onePassHasher.start().appendAsciiStr(e).end(t)},e._hex=function(t){var n,r,o,i,a=e.hexChars,s=e.hexOut;for(i=0;i<4;i+=1)for(r=8*i,n=t[i],o=0;o<8;o+=2)s[r+1+o]=a.charAt(15&n),n>>>=4,s[r+0+o]=a.charAt(15&n),n>>>=4;return s.join("")},e._md5cycle=function(e,t){var n=e[0],r=e[1],o=e[2],i=e[3];r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+t[0]-680876936|0)<<7|n>>>25)+r|0)&r|~n&o)+t[1]-389564586|0)<<12|i>>>20)+n|0)&n|~i&r)+t[2]+606105819|0)<<17|o>>>15)+i|0)&i|~o&n)+t[3]-1044525330|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+t[4]-176418897|0)<<7|n>>>25)+r|0)&r|~n&o)+t[5]+1200080426|0)<<12|i>>>20)+n|0)&n|~i&r)+t[6]-1473231341|0)<<17|o>>>15)+i|0)&i|~o&n)+t[7]-45705983|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+t[8]+1770035416|0)<<7|n>>>25)+r|0)&r|~n&o)+t[9]-1958414417|0)<<12|i>>>20)+n|0)&n|~i&r)+t[10]-42063|0)<<17|o>>>15)+i|0)&i|~o&n)+t[11]-1990404162|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&o|~r&i)+t[12]+1804603682|0)<<7|n>>>25)+r|0)&r|~n&o)+t[13]-40341101|0)<<12|i>>>20)+n|0)&n|~i&r)+t[14]-1502002290|0)<<17|o>>>15)+i|0)&i|~o&n)+t[15]+1236535329|0)<<22|r>>>10)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+t[1]-165796510|0)<<5|n>>>27)+r|0)&o|r&~o)+t[6]-1069501632|0)<<9|i>>>23)+n|0)&r|n&~r)+t[11]+643717713|0)<<14|o>>>18)+i|0)&n|i&~n)+t[0]-373897302|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+t[5]-701558691|0)<<5|n>>>27)+r|0)&o|r&~o)+t[10]+38016083|0)<<9|i>>>23)+n|0)&r|n&~r)+t[15]-660478335|0)<<14|o>>>18)+i|0)&n|i&~n)+t[4]-405537848|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+t[9]+568446438|0)<<5|n>>>27)+r|0)&o|r&~o)+t[14]-1019803690|0)<<9|i>>>23)+n|0)&r|n&~r)+t[3]-187363961|0)<<14|o>>>18)+i|0)&n|i&~n)+t[8]+1163531501|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r&i|o&~i)+t[13]-1444681467|0)<<5|n>>>27)+r|0)&o|r&~o)+t[2]-51403784|0)<<9|i>>>23)+n|0)&r|n&~r)+t[7]+1735328473|0)<<14|o>>>18)+i|0)&n|i&~n)+t[12]-1926607734|0)<<20|r>>>12)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+t[5]-378558|0)<<4|n>>>28)+r|0)^r^o)+t[8]-2022574463|0)<<11|i>>>21)+n|0)^n^r)+t[11]+1839030562|0)<<16|o>>>16)+i|0)^i^n)+t[14]-35309556|0)<<23|r>>>9)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+t[1]-1530992060|0)<<4|n>>>28)+r|0)^r^o)+t[4]+1272893353|0)<<11|i>>>21)+n|0)^n^r)+t[7]-155497632|0)<<16|o>>>16)+i|0)^i^n)+t[10]-1094730640|0)<<23|r>>>9)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+t[13]+681279174|0)<<4|n>>>28)+r|0)^r^o)+t[0]-358537222|0)<<11|i>>>21)+n|0)^n^r)+t[3]-722521979|0)<<16|o>>>16)+i|0)^i^n)+t[6]+76029189|0)<<23|r>>>9)+o|0,r=((r+=((o=((o+=((i=((i+=((n=((n+=(r^o^i)+t[9]-640364487|0)<<4|n>>>28)+r|0)^r^o)+t[12]-421815835|0)<<11|i>>>21)+n|0)^n^r)+t[15]+530742520|0)<<16|o>>>16)+i|0)^i^n)+t[2]-995338651|0)<<23|r>>>9)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+t[0]-198630844|0)<<6|n>>>26)+r|0)|~o))+t[7]+1126891415|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+t[14]-1416354905|0)<<15|o>>>17)+i|0)|~n))+t[5]-57434055|0)<<21|r>>>11)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+t[12]+1700485571|0)<<6|n>>>26)+r|0)|~o))+t[3]-1894986606|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+t[10]-1051523|0)<<15|o>>>17)+i|0)|~n))+t[1]-2054922799|0)<<21|r>>>11)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+t[8]+1873313359|0)<<6|n>>>26)+r|0)|~o))+t[15]-30611744|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+t[6]-1560198380|0)<<15|o>>>17)+i|0)|~n))+t[13]+1309151649|0)<<21|r>>>11)+o|0,r=((r+=((i=((i+=(r^((n=((n+=(o^(r|~i))+t[4]-145523070|0)<<6|n>>>26)+r|0)|~o))+t[11]-1120210379|0)<<10|i>>>22)+n|0)^((o=((o+=(n^(i|~r))+t[2]+718787259|0)<<15|o>>>17)+i|0)|~n))+t[9]-343485551|0)<<21|r>>>11)+o|0,e[0]=n+e[0]|0,e[1]=r+e[1]|0,e[2]=o+e[2]|0,e[3]=i+e[3]|0},e.prototype.start=function(){return this._dataLength=0,this._bufferLength=0,this._state.set(e.stateIdentity),this},e.prototype.appendStr=function(t){var n,r,o=this._buffer8,i=this._buffer32,a=this._bufferLength;for(r=0;r<t.length;r+=1){if((n=t.charCodeAt(r))<128)o[a++]=n;else if(n<2048)o[a++]=192+(n>>>6),o[a++]=63&n|128;else if(n<55296||n>56319)o[a++]=224+(n>>>12),o[a++]=n>>>6&63|128,o[a++]=63&n|128;else{if((n=1024*(n-55296)+(t.charCodeAt(++r)-56320)+65536)>1114111)throw new Error("Unicode standard supports code points up to U+10FFFF");o[a++]=240+(n>>>18),o[a++]=n>>>12&63|128,o[a++]=n>>>6&63|128,o[a++]=63&n|128}a>=64&&(this._dataLength+=64,e._md5cycle(this._state,i),a-=64,i[0]=i[16])}return this._bufferLength=a,this},e.prototype.appendAsciiStr=function(t){for(var n,r=this._buffer8,o=this._buffer32,i=this._bufferLength,a=0;;){for(n=Math.min(t.length-a,64-i);n--;)r[i++]=t.charCodeAt(a++);if(i<64)break;this._dataLength+=64,e._md5cycle(this._state,o),i=0}return this._bufferLength=i,this},e.prototype.appendByteArray=function(t){for(var n,r=this._buffer8,o=this._buffer32,i=this._bufferLength,a=0;;){for(n=Math.min(t.length-a,64-i);n--;)r[i++]=t[a++];if(i<64)break;this._dataLength+=64,e._md5cycle(this._state,o),i=0}return this._bufferLength=i,this},e.prototype.getState=function(){var e=this,t=e._state;return{buffer:String.fromCharCode.apply(null,e._buffer8),buflen:e._bufferLength,length:e._dataLength,state:[t[0],t[1],t[2],t[3]]}},e.prototype.setState=function(e){var t,n=e.buffer,r=e.state,o=this._state;for(this._dataLength=e.length,this._bufferLength=e.buflen,o[0]=r[0],o[1]=r[1],o[2]=r[2],o[3]=r[3],t=0;t<n.length;t+=1)this._buffer8[t]=n.charCodeAt(t)},e.prototype.end=function(t){void 0===t&&(t=!1);var n,r=this._bufferLength,o=this._buffer8,i=this._buffer32,a=1+(r>>2);if(this._dataLength+=r,o[r]=128,o[r+1]=o[r+2]=o[r+3]=0,i.set(e.buffer32Identity.subarray(a),a),r>55&&(e._md5cycle(this._state,i),i.set(e.buffer32Identity)),(n=8*this._dataLength)<=4294967295)i[14]=n;else{var s=n.toString(16).match(/(.*?)(.{0,8})$/);if(null===s)return;var c=parseInt(s[2],16),u=parseInt(s[1],16)||0;i[14]=c,i[15]=u}return e._md5cycle(this._state,i),t?this._state:e._hex(this._state)},e.stateIdentity=new Int32Array([1732584193,-271733879,-1732584194,271733878]),e.buffer32Identity=new Int32Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]),e.hexChars="0123456789abcdef",e.hexOut=[],e.onePassHasher=new e,e}();t.Md5=n,"5d41402abc4b2a76b9719d911017c592"!==n.hashStr("hello")&&console.error("Md5 self test failed.")}));(x=v)&&x.__esModule&&Object.prototype.hasOwnProperty.call(x,"default")&&x.default;var E=v.Md5;function R(){var e=navigator.userAgent.toLowerCase();return!!/meiju|msmart/.test(e)}function S(){var e=navigator.userAgent.toLowerCase(),t=/meiju|msmart/.test(e);return t&&window.global&&window.global.registerModules?"new":t&&window.mdSmartios?"old":"未知"}function w(){var e=(new Date).getTime();return window.performance&&"function"==typeof window.performance.now&&(e+=performance.now()),"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var n=(e+16*Math.random())%16|0;return e=Math.floor(e/16),("x"==t?n:3&n|8).toString(16)}))}function b(e,t,n,r){void 0===r&&(r=!1),e.addEventListener(t,n,r)}function _(e,t,n){if(t in e){var r=n(e[t]);"function"==typeof r&&(e[t]=r)}}function A(e){return"[object String]"===Object.prototype.toString.call(e)}function C(){return Date.now()}if("new"==S())var P=global.native.requireModule("bridgeModule"),M=global.native.requireModule("router");function T(e,t,n){return new Promise((function(r,o){e||o("params can not be empty in native bridge module"),e=JSON.stringify(e),console.log("params",e),P.commandInterface(e,(function(e){try{e=JSON.parse(e)}catch(e){}console.log("commandInterface success resData",e),"function"==typeof t&&t&&t(e),r(e)}),(function(e){try{e=JSON.parse(e)}catch(e){}console.log("commandInterface fail resData2",e),"function"==typeof n&&n&&n(e),r(e)}))}))}var N=function(e){var t=e?e+"参数不能为空":"参数不能为空";return new Promise((function(e,n){try{console.error(t),n(t)}catch(e){console.error(e),n(e)}}))};function $(e,t,n,r){return void 0===t&&(t={}),new Promise((function(o,i){M&&M[e](t,(function(e){try{e=JSON.parse(e)}catch(e){}o(e),n&&n(e)}),(function(e){i(e),r&&r(e)}))}))}var I={getAppInfo:function(e){return void 0===e&&(e={}),T({operation:"getAppInfo",params:e})},pageLoaded:function(e){return void 0===e&&(e=N()),T({operation:"pageLoaded",params:e})},reportException:function(e){return void 0===e&&(e=N()),T({operation:"reportException",params:e})},reportWhiteScreen:function(e){return void 0===e&&(e=N()),T({operation:"reportWhiteScreen",params:e})},setMiniAppCache:function(e,t,n){return void 0===e&&(e=N()),$("setMiniAppCache",e,t,n)},getMiniAppCache:function(e,t,n){return void 0===e&&(e=N()),$("getMiniAppCache",e,t,n)},deleteMiniAppCache:function(e,t,n){return void 0===e&&(e=N()),$("deleteMiniAppCache",e,t,n)},setGlobalAppCache:function(e,t,n){return void 0===e&&(e=N()),$("setGlobalAppCache",e,t,n)},getGlobalAppCache:function(e,t,n){return void 0===e&&(e=N()),$("getGlobalAppCache",e,t,n)},deleteGlobalAppCache:function(e,t,n){return void 0===e&&(e=N()),$("deleteGlobalAppCache",e,t,n)},burialPoint:function(e){return void 0===e&&(e={}),T(n({operation:"burialPoint"},e))},trackEvent:function(e){return void 0===e&&(e={}),T(n({operation:"trackEvent"},e))}},L={trackEvent:function(e){void 0===e&&(e={}),window.mdSmartios.bridge.trackEvent(e,null,null)},getAppInfo:function(e){return void 0===e&&(e={}),new Promise((function(e){window.mdSmartios.bridge.getAppInfo((function(t){console.info(t),e(t)}))}))},pageLoaded:function(){return{}},reportException:function(){return{}},reportWhiteScreen:function(){return{}},setMiniAppCache:function(){return{}},getMiniAppCache:function(){return{}},deleteMiniAppCache:function(){return{}},setGlobalAppCache:function(){return{}},getGlobalAppCache:function(){return new Promise((function(e){e({})}))},deleteGlobalAppCache:function(){return{}},burialPoint:function(e){return void 0===e&&(e={}),{}}},k="new"===S()?I:L,B=function(){var e="undefined"!=typeof self?self:this,t=e||{},n={navigator:void 0!==e.navigator?e.navigator:{},infoMap:{engine:["WebKit","Trident","Gecko","Presto"],browser:["Safari","Chrome","Edge","IE","Firefox","Firefox Focus","Chromium","Opera","Vivaldi","Yandex","Arora","Lunascape","QupZilla","Coc Coc","Kindle","Iceweasel","Konqueror","Iceape","SeaMonkey","Epiphany","360","360SE","360EE","UC","QQBrowser","QQ","Baidu","Maxthon","Sogou","LBBROWSER","2345Explorer","TheWorld","XiaoMi","Quark","Qiyu","Wechat","Taobao","Alipay","Weibo","Douban","Suning","iQiYi"],os:["Windows","Linux","Mac OS","Android","Ubuntu","FreeBSD","Debian","iOS","Windows Phone","BlackBerry","MeeGo","Symbian","Chrome OS","WebOS"],device:["Mobile","Tablet","iPad"]}},r={getMatchMap:function(e){return{Trident:e.indexOf("Trident")>-1||e.indexOf("NET CLR")>-1,Presto:e.indexOf("Presto")>-1,WebKit:e.indexOf("AppleWebKit")>-1,Gecko:e.indexOf("Gecko/")>-1,Safari:e.indexOf("Safari")>-1,Chrome:e.indexOf("Chrome")>-1||e.indexOf("CriOS")>-1,IE:e.indexOf("MSIE")>-1||e.indexOf("Trident")>-1,Edge:e.indexOf("Edge")>-1,Firefox:e.indexOf("Firefox")>-1||e.indexOf("FxiOS")>-1,"Firefox Focus":e.indexOf("Focus")>-1,Chromium:e.indexOf("Chromium")>-1,Opera:e.indexOf("Opera")>-1||e.indexOf("OPR")>-1,Vivaldi:e.indexOf("Vivaldi")>-1,Yandex:e.indexOf("YaBrowser")>-1,Arora:e.indexOf("Arora")>-1,Lunascape:e.indexOf("Lunascape")>-1,QupZilla:e.indexOf("QupZilla")>-1,"Coc Coc":e.indexOf("coc_coc_browser")>-1,Kindle:e.indexOf("Kindle")>-1||e.indexOf("Silk/")>-1,Iceweasel:e.indexOf("Iceweasel")>-1,Konqueror:e.indexOf("Konqueror")>-1,Iceape:e.indexOf("Iceape")>-1,SeaMonkey:e.indexOf("SeaMonkey")>-1,Epiphany:e.indexOf("Epiphany")>-1,360:e.indexOf("QihooBrowser")>-1||e.indexOf("QHBrowser")>-1,"360EE":e.indexOf("360EE")>-1,"360SE":e.indexOf("360SE")>-1,UC:e.indexOf("UC")>-1||e.indexOf(" UBrowser")>-1,QQBrowser:e.indexOf("QQBrowser")>-1,QQ:e.indexOf("QQ/")>-1,Baidu:e.indexOf("Baidu")>-1||e.indexOf("BIDUBrowser")>-1,Maxthon:e.indexOf("Maxthon")>-1,Sogou:e.indexOf("MetaSr")>-1||e.indexOf("Sogou")>-1,LBBROWSER:e.indexOf("LBBROWSER")>-1,"2345Explorer":e.indexOf("2345Explorer")>-1,TheWorld:e.indexOf("TheWorld")>-1,XiaoMi:e.indexOf("MiuiBrowser")>-1,Quark:e.indexOf("Quark")>-1,Qiyu:e.indexOf("Qiyu")>-1,Wechat:e.indexOf("MicroMessenger")>-1,Taobao:e.indexOf("AliApp(TB")>-1,Alipay:e.indexOf("AliApp(AP")>-1,Weibo:e.indexOf("Weibo")>-1,Douban:e.indexOf("com.douban.frodo")>-1,Suning:e.indexOf("SNEBUY-APP")>-1,iQiYi:e.indexOf("IqiyiApp")>-1,Windows:e.indexOf("Windows")>-1,Linux:e.indexOf("Linux")>-1||e.indexOf("X11")>-1,"Mac OS":e.indexOf("Macintosh")>-1,Android:e.indexOf("Android")>-1||e.indexOf("Adr")>-1,Ubuntu:e.indexOf("Ubuntu")>-1,FreeBSD:e.indexOf("FreeBSD")>-1,Debian:e.indexOf("Debian")>-1,"Windows Phone":e.indexOf("IEMobile")>-1||e.indexOf("Windows Phone")>-1,BlackBerry:e.indexOf("BlackBerry")>-1||e.indexOf("RIM")>-1,MeeGo:e.indexOf("MeeGo")>-1,Symbian:e.indexOf("Symbian")>-1,iOS:e.indexOf("like Mac OS X")>-1,"Chrome OS":e.indexOf("CrOS")>-1,WebOS:e.indexOf("hpwOS")>-1,Mobile:e.indexOf("Mobi")>-1||e.indexOf("iPh")>-1||e.indexOf("480")>-1,Tablet:e.indexOf("Tablet")>-1||e.indexOf("Nexus 7")>-1,iPad:e.indexOf("iPad")>-1}},matchInfoMap:function(e){var t=n.navigator.userAgent||{},o=r.getMatchMap(t);for(var i in n.infoMap)for(var a=0;a<n.infoMap[i].length;a++){var s=n.infoMap[i][a];o[s]&&(e[i]=s)}},getOS:function(){return r.matchInfoMap(this),this.os},getOSVersion:function(){var e=this,t=n.navigator.userAgent||{};e.osVersion="";var r={Windows:function(){var e=t.replace(/^.*Windows NT ([\d.]+);.*$/,"$1");return{6.4:"10",6.3:"8.1",6.2:"8",6.1:"7","6.0":"Vista",5.2:"XP",5.1:"XP","5.0":"2000"}[e]||e},Android:function(){return t.replace(/^.*Android ([\d.]+);.*$/,"$1")},iOS:function(){return t.replace(/^.*OS ([\d_]+) like.*$/,"$1").replace(/_/g,".")},Debian:function(){return t.replace(/^.*Debian\/([\d.]+).*$/,"$1")},"Windows Phone":function(){return t.replace(/^.*Windows Phone( OS)? ([\d.]+);.*$/,"$2")},"Mac OS":function(){return t.replace(/^.*Mac OS X ([\d_]+).*$/,"$1").replace(/_/g,".")},WebOS:function(){return t.replace(/^.*hpwOS\/([\d.]+);.*$/,"$1")}};return r[e.os]&&(e.osVersion=r[e.os](),e.osVersion==t&&(e.osVersion="")),e.osVersion},getOrientationStatu:function(){return window.matchMedia("(orientation: portrait)").matches?"竖屏":"横屏"},getDeviceType:function(){var e=this;return e.device="PC",r.matchInfoMap(e),e.device},getNetwork:function(){return navigator&&navigator.connection&&navigator.connection.effectiveType},getLanguage:function(){var e;return this.language=((e=(n.navigator.browserLanguage||n.navigator.language).split("-"))[1]&&(e[1]=e[1].toUpperCase()),e.join("_")),this.language},createFingerprint:function(e){var t=document.createElement("canvas"),n=t.getContext("2d"),r=e||window.location.host;n.textBaseline="top",n.font="14px 'Arial'",n.textBaseline="tencent",n.fillStyle="#f60",n.fillRect(125,1,62,20),n.fillStyle="#069",n.fillText(r,2,15),n.fillStyle="rgba(102, 204, 0, 0.7)",n.fillText(r,4,17);var o=t.toDataURL().replace("data:image/png;base64,","");return function(e){var t,n,r,o="";for(t=0,n=(e+="").length;t<n;t++)o+=(r=e.charCodeAt(t).toString(16)).length<2?"0"+r:r;return o}(atob(o).slice(-16,-12))},getBrowserInfo:function(){var e=this;r.matchInfoMap(e);var o=n.navigator.userAgent||{},i=function(e,t){var r=n.navigator.mimeTypes;for(var o in r)if(r[o][e]==t)return!0;return!1},a=r.getMatchMap(o),s=!1;if(t.chrome){var c=o.replace(/^.*Chrome\/([\d]+).*$/,"$1");c>36&&t.showModalDialog?s=!0:c>45&&(s=i("type","application/vnd.chromium.remoting-viewer"))}if(a.Baidu&&a.Opera&&(a.Baidu=!1),a.Mobile&&(a.Mobile=!(o.indexOf("iPad")>-1)),s&&(i("type","application/gameplugin")||n.navigator&&void 0===n.navigator.connection.saveData?a["360SE"]=!0:a["360EE"]=!0),a.IE||a.Edge)switch(window.screenTop-window.screenY){default:break;case 102:a["360EE"]=!0;break;case 104:a["360SE"]=!0}var u={Safari:function(){return o.replace(/^.*Version\/([\d.]+).*$/,"$1")},Chrome:function(){return o.replace(/^.*Chrome\/([\d.]+).*$/,"$1").replace(/^.*CriOS\/([\d.]+).*$/,"$1")},IE:function(){return o.replace(/^.*MSIE ([\d.]+).*$/,"$1").replace(/^.*rv:([\d.]+).*$/,"$1")},Edge:function(){return o.replace(/^.*Edge\/([\d.]+).*$/,"$1")},Firefox:function(){return o.replace(/^.*Firefox\/([\d.]+).*$/,"$1").replace(/^.*FxiOS\/([\d.]+).*$/,"$1")},"Firefox Focus":function(){return o.replace(/^.*Focus\/([\d.]+).*$/,"$1")},Chromium:function(){return o.replace(/^.*Chromium\/([\d.]+).*$/,"$1")},Opera:function(){return o.replace(/^.*Opera\/([\d.]+).*$/,"$1").replace(/^.*OPR\/([\d.]+).*$/,"$1")},Vivaldi:function(){return o.replace(/^.*Vivaldi\/([\d.]+).*$/,"$1")},Yandex:function(){return o.replace(/^.*YaBrowser\/([\d.]+).*$/,"$1")},Arora:function(){return o.replace(/^.*Arora\/([\d.]+).*$/,"$1")},Lunascape:function(){return o.replace(/^.*Lunascape[\/\s]([\d.]+).*$/,"$1")},QupZilla:function(){return o.replace(/^.*QupZilla[\/\s]([\d.]+).*$/,"$1")},"Coc Coc":function(){return o.replace(/^.*coc_coc_browser\/([\d.]+).*$/,"$1")},Kindle:function(){return o.replace(/^.*Version\/([\d.]+).*$/,"$1")},Iceweasel:function(){return o.replace(/^.*Iceweasel\/([\d.]+).*$/,"$1")},Konqueror:function(){return o.replace(/^.*Konqueror\/([\d.]+).*$/,"$1")},Iceape:function(){return o.replace(/^.*Iceape\/([\d.]+).*$/,"$1")},SeaMonkey:function(){return o.replace(/^.*SeaMonkey\/([\d.]+).*$/,"$1")},Epiphany:function(){return o.replace(/^.*Epiphany\/([\d.]+).*$/,"$1")},360:function(){return o.replace(/^.*QihooBrowser\/([\d.]+).*$/,"$1")},"360SE":function(){return{63:"10.0",55:"9.1",45:"8.1",42:"8.0",31:"7.0",21:"6.3"}[o.replace(/^.*Chrome\/([\d]+).*$/,"$1")]||""},"360EE":function(){return{69:"11.0",63:"9.5",55:"9.0",50:"8.7",30:"7.5"}[o.replace(/^.*Chrome\/([\d]+).*$/,"$1")]||""},Maxthon:function(){return o.replace(/^.*Maxthon\/([\d.]+).*$/,"$1")},QQBrowser:function(){return o.replace(/^.*QQBrowser\/([\d.]+).*$/,"$1")},QQ:function(){return o.replace(/^.*QQ\/([\d.]+).*$/,"$1")},Baidu:function(){return o.replace(/^.*BIDUBrowser[\s\/]([\d.]+).*$/,"$1")},UC:function(){return o.replace(/^.*UC?Browser\/([\d.]+).*$/,"$1")},Sogou:function(){return o.replace(/^.*SE ([\d.X]+).*$/,"$1").replace(/^.*SogouMobileBrowser\/([\d.]+).*$/,"$1")},LBBROWSER:function(){return{57:"6.5",49:"6.0",46:"5.9",42:"5.3",39:"5.2",34:"5.0",29:"4.5",21:"4.0"}[navigator.userAgent.replace(/^.*Chrome\/([\d]+).*$/,"$1")]||""},"2345Explorer":function(){return o.replace(/^.*2345Explorer\/([\d.]+).*$/,"$1")},TheWorld:function(){return o.replace(/^.*TheWorld ([\d.]+).*$/,"$1")},XiaoMi:function(){return o.replace(/^.*MiuiBrowser\/([\d.]+).*$/,"$1")},Quark:function(){return o.replace(/^.*Quark\/([\d.]+).*$/,"$1")},Qiyu:function(){return o.replace(/^.*Qiyu\/([\d.]+).*$/,"$1")},Wechat:function(){return o.replace(/^.*MicroMessenger\/([\d.]+).*$/,"$1")},Taobao:function(){return o.replace(/^.*AliApp\(TB\/([\d.]+).*$/,"$1")},Alipay:function(){return o.replace(/^.*AliApp\(AP\/([\d.]+).*$/,"$1")},Weibo:function(){return o.replace(/^.*weibo__([\d.]+).*$/,"$1")},Douban:function(){return o.replace(/^.*com.douban.frodo\/([\d.]+).*$/,"$1")},Suning:function(){return o.replace(/^.*SNEBUY-APP([\d.]+).*$/,"$1")},iQiYi:function(){return o.replace(/^.*IqiyiVersion\/([\d.]+).*$/,"$1")}};return e.browserVersion="",u[e.browser]&&(e.browserVersion=u[e.browser](),e.browserVersion==o&&(e.browserVersion="")),"Edge"==e.browser&&(e.engine="EdgeHTML"),"Chrome"==e.browser&&parseInt(e.browserVersion)>27&&(e.engine="Blink"),"Opera"==e.browser&&parseInt(e.browserVersion)>12&&(e.engine="Blink"),"Yandex"==e.browser&&(e.engine="Blink"),e.browser+"（版本: "+e.browserVersion+"&nbsp;&nbsp;内核: "+e.engine+"）"}},o={DeviceInfoObj:function(e){e=e||{domain:""};var o={deviceType:r.getDeviceType(),OS:r.getOS(),OSVersion:r.getOSVersion(),screenHeight:t.screen.height,screenWidth:t.screen.width,language:r.getLanguage(),netWork:r.getNetwork(),orientation:r.getOrientationStatu(),browserInfo:r.getBrowserInfo(),fingerprint:r.createFingerprint(e.domain),userAgent:n.navigator.userAgent};if(!e.info||0==e.info.length)return o;var i={};for(var a in o)e.info.forEach((function(e){e.toLowerCase()==a.toLowerCase()&&(i[e=a]=o[e])}));return i}};return{getDeviceInfo:function(e){return o.DeviceInfoObj(e)}}}();var W="[object process]"===Object.prototype.toString.call("undefined"!=typeof process?process:0)?global:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{},F=function(){function e(e){var t=this,n=this;this.commonParams={projectId:"",moduleType:"",moduleName:""},e&&(Object.keys(e).forEach((function(r){n[r]=e[r],r in t.commonParams&&(t.commonParams[r]=e[r])})),this.commonParams.moduleName=this.commonParams.projectId+"-"+this.commonParams.moduleName),this.sendWay=R()?p.BridgeBuried:"function"==typeof window.collectEvent?p.webZJSDK:p.IMG,R()&&(this.Bridge=k)}return e.prototype.report=function(e,t){var r={time:(new Date).format("yyyy-MM-dd HH:mm:ss")};switch(this.sendWay){case p.BridgeBuried:t==f.PERFORMANCE?this.sendPerformance(e):t==f.JSERROR?this.sendJsError(e):t==f.WhiteScreen?this.sendWhiteScreen(e):t==f.trackEvent&&this.trackEvent({event:"app_quality_event",eventParams:n(n(n({},r),this.commonParams),{quality_data:JSON.stringify(e)})});break;case p.webZJSDK:this.reportByZJSDK("app_quality_event",n(n(n({},r),this.commonParams),{quality_data:JSON.stringify(e)}));break;case p.IMG:this.reportByImg(e)}},e.prototype.sendInfo=function(e,t){var n=JSON.stringify(e);if(this.url){try{if(fetch&&t)return void fetch(this.url,{headers:{"Content-Type":"application/json"},method:"POST",body:n,mode:"same-origin",keepalive:!0})}catch(e){console.log("fetch请求异常",e)}try{var r=new XMLHttpRequest;r.open("POST",this.url,!0),r.setRequestHeader("Content-Type","application/json"),r.send(n)}catch(e){console.log(e)}}},e.prototype.sendPerformance=function(e){this.Bridge&&this.Bridge.pageLoaded({t4:e.logInfo.performance.loadPageTime,detailInfo:JSON.stringify(e)})},e.prototype.sendJsError=function(e){this.Bridge&&this.Bridge.reportException({exceptionReason:"xxx",exceptionLine:"xxx",exceptionColumn:"xxx",exceptionStack:"xxx",exceptionUrl:"xxx"})},e.prototype.sendWhiteScreen=function(e){this.Bridge&&this.Bridge.reportWhiteScreen({url:"xxx",detail:""})},e.prototype.burialPoint=function(e){void 0===e&&(e={});this.Bridge&&this.Bridge.burialPoint(n(n({},{pluginType:2,uploadType:1}),e))},e.prototype.trackEvent=function(e){void 0===e&&(e={}),this.Bridge&&this.Bridge.trackEvent(n({},e))},e.prototype.reportByZJSDK=function(e,t){void 0===t&&(t={}),setTimeout((function(){W.collectEvent(e,t)}),0)},e.prototype.reportByImg=function(e){if(this.url&&!this.checkUrl(this.url)||!this.url)console.log("上报信息url地址格式不正确,url=",this.url);else{var t=JSON.stringify(e);try{(new Image).src=this.url+"?v="+(new Date).getTime()+"&performance="+t}catch(e){console.log(e)}}},e.prototype.formatParams=function(e){var t=[];for(var n in e)t.push(encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t.join("&")},e.prototype.checkUrl=function(e){if(!e)return!1;return/^[hH][tT][tT][pP]([sS]?):\/\//.test(e)},e}(),U=function(){function e(e){this.error=function(){},this.warn=function(){},this.info=function(){},this.debug=e.debug||!1,this.registerInfo(),this.registerWarn(),this.registerError(),this.sendApi=new F(e)}return e.prototype.handleError=function(){},e.prototype.registerInfo=function(){this.info=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.debug&&console.log.apply(console,a(e))}},e.prototype.registerWarn=function(){this.warn=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this.debug&&console.log.apply(console,a(e))}},e.prototype.registerError=function(){var e=this;this.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return this.debug&&console.log.apply(console,a(t)),e.handleLog(c.CONSOLE_ERROR,s.CONSOLE_ERROR,arguments)}},e.prototype.handleLog=function(e,t,n){try{var r={type:t,exceptionLevel:e,exceptionReason:a(n).join("\r\n"),exceptionSourceUrl:location.href,exceptionStack:n};this.sendApi.report(r,f.trackEvent)}catch(t){console.log("console统计错误异常",e,t)}},e}();function D(){var e=50,t=["HTML","BODY","vc-switch"],n=0;function r(e){(e[0]&&t.includes(e[0].nodeName)||e[0]&&t.includes(e[0].className))&&(n+=1)}try{for(var o=1;o<e;o++){var i=document.elementsFromPoint(o/e*window.innerWidth,window.innerHeight/2),a=document.elementsFromPoint(window.innerWidth/2,o/e*window.innerHeight),s=document.elementsFromPoint(o/e*window.innerWidth,o/e*window.innerHeight),c=document.elementsFromPoint(o/e*window.innerWidth,(e-o)/e*window.innerHeight);r(i),r(a),r(s),r(c)}}catch(e){console.log("白屏异常",e)}return 196===n}var H=function(e){function r(t){var n,r=e.call(this,t)||this;return r.type=c.UNKNOW_ERROR,r.exceptionLevel=s.UNKNOW_ERROR,r.exceptionReason="",r.exceptionSourceUrl="",r.payload={},r.createErrorId=(n={},function(e){return!(n[e]>=8)&&("number"==typeof n[e]?n[e]++:n[e]=1,e)}),r}return t(r,e),r.prototype.recordError=function(){this.handleRecordError()},r.prototype.handleRecordError=function(){try{if(!this.exceptionReason)return;var e=this.handleErrorInfo();if(!this.createErrorId(e.unique_id))return;this.log.info("\n````````````````````` "+this.type+" `````````````````````\n"),this.log.info(e),this.setNullParams(),this.sendApi.report(e,f.trackEvent)}catch(e){this.log.error("monitor:统一处理JS错误异常",e)}},r.prototype.handleErrorInfo=function(){var e="错误类别: "+this.type+"\r\n";switch(e+="日志信息: "+this.exceptionReason+"\r\n",e+="页面地址: "+(this.exceptionSourceUrl?this.exceptionSourceUrl:"")+"\r\n",this.payload=n(n({},this.payload),{type:this.type,exceptionSourceUrl:this.exceptionSourceUrl,exceptionReason:this.exceptionReason,exceptionLevel:this.exceptionLevel}),this.exceptionLevel){case s.API_ERROR:e+="错误apiURL："+this.payload.apiCgi,e+=" api错误类型：",e+=1==this.payload.apiLevel?"【请求超时】":"【http状态码异常:"+this.payload.httpCode+"】";break;case s.PERFORMANCE:e+="页面完全加载时间"+this.payload.loadPageTime}return{version:m,type:this.type,page:this.exceptionSourceUrl,info:e,unique_id:E.hashStr(this.exceptionLevel+this.exceptionSourceUrl+this.exceptionReason),id:w(),payload:this.payload}},r.prototype.setParams=function(e){this.exceptionLevel=s.BLANK,this.type=c.BLANK,this.exceptionReason=e,this.exceptionSourceUrl=window.location.href,this.recordError()},r.prototype.setConsoleParams=function(e){this.exceptionLevel=e.exceptionLevel,this.type=e.type,this.exceptionReason=e.exceptionReason,this.exceptionSourceUrl=e.exceptionSourceUrl,this.exceptionStack=e.exceptionStack,this.recordError()},r.prototype.setNullParams=function(){this.type=c.UNKNOW_ERROR,this.exceptionLevel=s.UNKNOW_ERROR,this.exceptionReason="",this.exceptionSourceUrl="",this.exceptionLine=void 0,this.exceptionColumn=void 0,this.exceptionStack="",this.VueErrorInfo="",this.payload={}},r.prototype.handleBlank=function(e){var t=this;setTimeout((function(){D()&&t.setParams(e)}),800)},r}(function(){function e(e){this.appid="",this.category=s.UNKNOW_ERROR,this.level=u.INFO;var t=this;Object.keys(e).forEach((function(n){t[n]=e[n]})),this.sendApi=new F(e),this.log=new U(e);var n,i,a=(n=this.appid,i=n?function(){if(!k)throw new Error("there is no jsBridge");return{getItem:function(e){return r(this,void 0,void 0,(function(){var t,n;return o(this,(function(r){switch(r.label){case 0:return t=null,n={keys:[e]},[4,k.getGlobalAppCache(n)];case 1:return[2,(t=r.sent())&&t.data&&t.data[e]||""]}}))}))},setItem:function(e,t){var n,r={type:1,params:(n={},n[e]=t,n)};k.setGlobalAppCache(r)},removeItem:function(e){var t={keys:[e]};k.deleteGlobalAppCache(t)}}}():window.localStorage,{save:function(e,t){return!(!i||!t||(i.setItem(e,t),0))},get:function(e){return i?i.getItem(e):null},remove:function(e){i&&i.removeItem(e)}});this.setItem=a.save,this.getItem=a.get,this.removeItem=a.remove}return e.prototype.getDeviceInfo=function(e){var t=this;return new Promise((function(n,i){return r(t,void 0,void 0,(function(){var t,r;return o(this,(function(o){switch(o.label){case 0:return e?[4,k.getAppInfo()]:[3,2];case 1:return t=o.sent(),n(t),[3,3];case 2:try{r=B.getDeviceInfo(),n(JSON.stringify(r))}catch(e){console.log(e),i(e)}o.label=3;case 3:return[2]}}))}))}))},e}());Date.prototype.format=function(e){var t={"M+":this.getMonth()+1,"d+":this.getDate(),"h+":this.getHours()%12==0?12:this.getHours()%12,"H+":this.getHours(),"m+":this.getMinutes(),"s+":this.getSeconds(),"q+":Math.floor((this.getMonth()+3)/3),S:this.getMilliseconds()};for(var n in/(y+)/.test(e)&&(e=e.replace(RegExp.$1,(this.getFullYear()+"").substr(4-RegExp.$1.length))),/(E+)/.test(e)&&(e=e.replace(RegExp.$1,(RegExp.$1.length>1?RegExp.$1.length>2?"/u661f/u671f":"/u5468":"")+{0:"/u65e5",1:"/u4e00",2:"/u4e8c",3:"/u4e09",4:"/u56db",5:"/u4e94",6:"/u516d"}[this.getDay()+""])),t)new RegExp("("+n+")").test(e)&&(e=e.replace(RegExp.$1,1==RegExp.$1.length?t[n]:("00"+t[n]).substr((""+t[n]).length)));return e};var j=function(e){function i(t){var n=e.call(this,t)||this;n.category=c.PERFORMANCE,n.pageName=window.location.href,n.isPage=!0,n.isResource=!0,n.isRScript=!0,n.isRCSS=!0,n.isRFetch=!0,n.isRXHR=!0,n.isRLink=!0,n.isRIMG=!0,n.url="";var r=n;return n.params=t,Object.keys(t).forEach((function(e){r[e]=t[e]})),n.usefulType=n.getSourceType(t),n}return t(i,e),i.prototype.getSourceType=function(e){var t=[];return!1!==e.isRScript&&t.push("script"),!1!==e.isRCSS&&t.push("css"),!1!==e.isRFetch&&t.push("fetch"),!1!==e.isRXHR&&t.push("xmlhttprequest"),!1!==e.isRLink&&t.push("link"),!1!==e.isRIMG&&t.push("img"),t},i.prototype.record=function(){return r(this,void 0,void 0,(function(){var e,t,r,i;return o(this,(function(o){try{if(this.isPage&&(this.performance=g.getTiming(),!this.performance))return[2];this.isResource&&(this.resourceList=g.getEntries(this.usefulType)),this.performance&&({curTime:(new Date).format("yyyy-MM-dd HH:mm:ss"),performance:this.performance,pageName:this.pageName},e=this.performance,e.ttfbTime,t=e.loadPageTime,e.reqTime,r=Number(t)<3e3,i={version:m,type:r?c.H5LOW_PERFORMANCE:this.category,page:window.location.href,info:r?"页面完全加载时间3秒以下":"页面完全加载时间3秒以上页面采集",payload:n({exceptionLevel:s.PERFORMANCE,exceptionSourceUrl:this.pageName,exceptionReason:r?"页面完全加载时间3秒以下":"页面完全加载时间3秒以上页面采集"},this.performance),unique_id:E.hashStr(this.category+window.location.href+t),id:w()},this.log.info("\n````````````````````` "+i.type+" `````````````````````\n"),this.log.info(i),this.sendApi.report(i,f.trackEvent),this.clearPerformance())}catch(e){this.log.error("性能信息上报异常",JSON.stringify(e,Object.getOwnPropertyNames(e)))}return[2]}))}))},i.prototype.randomString=function(e){e=e||10;for(var t="ABCDEFGHJKMNPQRSTWXYZabcdefhijkmnprstwxyz123456789",n=t.length,r="",o=0;o<e;o++)r+=t.charAt(Math.floor(Math.random()*n));return r+(new Date).getTime()},i.prototype.markUser=function(){var e=sessionStorage.getItem("session_user")||"";return e||(e=this.randomString(),sessionStorage.setItem("session_user",e)),e},i.prototype.markUv=function(){return r(this,void 0,void 0,(function(){var e,t,n,r;return o(this,(function(o){switch(o.label){case 0:return e=new Date,[4,this.getItem("OneDay_User")];case 1:return t=o.sent()||"",[4,this.getItem("OneDay_User_Time")];case 2:return n=o.sent()||"",r=e.format("yyyy/MM/dd 23:59:59"),(!t&&!n||+e.getTime()>1*+n)&&(t=this.randomString(),this.setItem("OneDay_User",t),this.setItem("OneDay_User_Time",new Date(r).getTime().toString())),[2,t]}}))}))},i.prototype.clearPerformance=function(){performance.clearResourceTimings(),this.performance=null,this.resourceList=void 0},i}(H),J=function(e){function n(t){return e.call(this,t)||this}return t(n,e),n.prototype.handleError=function(){var e=this,t=this;window.onerror=function(n,r,o,i,a){try{if(e.exceptionLevel=s.JS_ERROR,e.type=c.JS_ERROR,e.exceptionReason=n,e.exceptionSourceUrl=r||window.location.href||"App",e.payload.exceptionLine=o,e.payload.exceptionColumn=i,"string"==typeof n&&e.isNetWorkSome(n))return;e.payload.exceptionStack=a&&JSON.stringify(a,Object.getOwnPropertyNames(a)),e.recordError(),e.handleBlank("JS报错检测"+n)}catch(a){t.log.error("monitor:js错误异常",a&&JSON.stringify(a,Object.getOwnPropertyNames(a)))}}},n.prototype.isNetWorkSome=function(e){return!!/Network Error|Script error/i.test(e)},n}(H),Q=function(e){function n(t){return e.call(this,t)||this}return t(n,e),n.prototype.handleError=function(){var e=this,t=this;window.addEventListener("unhandledrejection",(function(n){try{if(!n||!n.reason)return;if(e.exceptionSourceUrl=window.location.href,n.reason.config&&n.reason.config.url&&(e.payload.netWorkErrorUrl=n.reason.config.url),e.exceptionLevel=s.PROMISE_ERROR,e.type=c.JS_ERROR,e.exceptionReason=n.reason&&n.reason.message,"string"==typeof e.exceptionReason&&e.isNetWorkSome(e.exceptionReason))return;e.payload.exceptionStack=n.reason&&JSON.stringify(n.reason,Object.getOwnPropertyNames(n.reason)),e.recordError(),e.handleBlank("Promise Error报错检测:"+(n.reason&&n.reason.message||""))}catch(e){t.log.error("monitor:promiseError异常",JSON.stringify(e,Object.getOwnPropertyNames(e)))}}),!0)},n.prototype.isNetWorkSome=function(e){return!!/Network Error|Script error/i.test(e)},n}(H),K=function(e){function n(t){return e.call(this,t)||this}return t(n,e),n.prototype.handleError=function(){var e=this,t=this;window.addEventListener("error",(function(n){try{if(!n)return;var r="";e.category=s.RESOURCE_ERROR;var o=n.target||n.srcElement;if(!(o instanceof HTMLScriptElement||o instanceof HTMLLinkElement||o instanceof HTMLImageElement))return;e.exceptionLevel=s.RESOURCE_ERROR,e.type=c.RESOURCE_ERROR;var i=o.src||o.href;if(!i||!e.isStaticSource(i))return;o&&(r="加载 "+o.tagName+" 资源错误资源URL是："+(o.src||o.href)),e.exceptionReason=r,e.exceptionSourceUrl=window.location.href,e.exceptionStack=o,e.payload.exceptionStack=JSON.stringify(n,Object.getOwnPropertyNames(n)),e.recordError(),setTimeout((function(){e.handleBlank("资源报错检测"+r)}),2e3)}catch(e){t.log.error("monitor:资源加载收集异常",e&&JSON.stringify(e,Object.getOwnPropertyNames(e)))}}),!0)},n.prototype.isStaticSource=function(e){return!!/\.(js|css|jpeg|png|jpg|svg|gif|webp|avif|apng)$/i.test(e)},n}(H),V=function(e){function n(t){return e.call(this,t)||this}return t(n,e),n.prototype.handleError=function(e){var t=this,n=this;e&&(e.config.errorHandler=function(e,r,o){console.error(e);try{var i={info:o,componentName:"",propsData:""};"[object Object]"===Object.prototype.toString.call(r)&&(i.componentName=r._isVue?r.$options.name||r.$options._componentTag:r.name,i.propsData=r.$options.propsData),t.exceptionLevel=s.VUE_ERROR,t.type=c.JS_ERROR,t.exceptionReason=e.message,t.exceptionSourceUrl=window.location.href,t.payload.exceptionStack=JSON.stringify(e,Object.getOwnPropertyNames(e)),t.payload.VueErrorInfo=JSON.parse(JSON.stringify(i)),t.recordError(),t.handleBlank("Vue报错检测:"+(e.message||""))}catch(e){n.log.error("monitor:vue错误异常",e&&JSON.stringify(e,Object.getOwnPropertyNames(e)))}return!1})},n}(H),q=function(e){function n(t){return e.call(this,t)||this}return t(n,e),n.prototype.handleError=function(){var e=this;try{var t=this;"complete"===document.readyState?setTimeout((function(){D()&&e.setParams("加载完成3S检测")}),3e3):window.addEventListener("load",(function(){setTimeout((function(){D()&&t.setParams("加载完成3S检测")}),3e3)}))}catch(e){this.log.error("monitor:BlankError异常",JSON.stringify(e,Object.getOwnPropertyNames(e)))}},n}(H),G=function(e){function n(t){return e.call(this,t)||this}return t(n,e),n.prototype.handleError=function(){var e=this,t=this;window.minixMonitorApiErrorCallBack=function(n){try{if(n&&2==n.type&&-1==O.findIndex((function(e){return e==n.code})))return;console.log("api异常收到回调",n);var r=navigator.userAgent,o="";if(r.indexOf("Android")>-1||r.indexOf("Adr")>-1)try{o=JSON.parse(n.api).url}catch(e){o=n.api}else o=n.api;var i=1==n.type?o+"+【请求超时】+"+n.code:o+"+【http状态码异常】+"+n.code;e.exceptionLevel=s.API_ERROR,e.type=c.API_ERROR,e.exceptionReason=i,e.exceptionSourceUrl=n.path,e.payload.apiCgi=n.api,e.payload.apiLevel=n.type,e.payload.costTime=n.costTime,e.payload.sendWay=n.sendWay,e.payload.httpCode=n.code,e.recordError(),e.handleBlank("api异常报错检测"+i)}catch(e){t.log.error("monitor:api错误异常",JSON.stringify(e,Object.getOwnPropertyNames(e)))}}},n}(H),X=function(e){function n(t){return e.call(this,t)||this}return t(n,e),n.prototype.handleError=function(){try{this.xhrReplace(),this.fetchReplace()}catch(e){this.log.error("xhr异常",JSON.stringify(e,Object.getOwnPropertyNames(e)))}},n.prototype.xhrReplace=function(){if("XMLHttpRequest"in W){var e=this,t=XMLHttpRequest.prototype;_(t,"open",(function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=t[1];this.minix_xhr={method:A(t[0])?t[0].toUpperCase():t[0],url:t[1],sTime:C(),type:h.XHR},y.find((function(e){return r.includes(e)}))&&(this.minix_xhr.isSdkUrl=!0),e.apply(this,t)}})),_(t,"send",(function(t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];b(this,"loadend",(function(){if(!this.minix_xhr.isSdkUrl){this.minix_xhr.reqData=n[0];var t=C();this.minix_xhr.time=t,this.minix_xhr.status=this.status,this.minix_xhr.statusText=this.statusText,this.minix_xhr.responseText=this.responseText,this.minix_xhr.elapsedTime=t-(this.minix_xhr.sTime||0),e.reportData(this.minix_xhr)}})),t.apply(this,n)}}))}},n.prototype.fetchReplace=function(){if("fetch"in W){var e=this;_(W,"fetch",(function(t){return function(n,r){var o=C();return t.apply(W,[n,r]).then((function(t){var i=t.clone(),a=C(),s={elapsedTime:a-o,type:h.FETCH,reqData:r&&r.body,method:r&&r.method||"GET",url:n,status:i.status,statusText:i.statusText,time:a};return i.text().then((function(t){s.responseText=t,e.reportData(s)})),t}),(function(t){var i=C(),a={elapsedTime:i-o,type:h.FETCH,method:r&&r.method||"GET",reqData:r&&r.body,url:n,status:0,statusText:t.name+t.message,time:i};throw e.reportData(a),t}))}}))}},n.prototype.reportData=function(e){var t=(e.status||0)>=400||0===e.status,n=(e.elapsedTime||0)>5e3;if(t||n){var r=t?"【"+e.method+"】+ "+e.url+"+【http状态码异常:"+e.status+"】":"【"+e.method+"】+ "+e.url+"+【请求超时】";this.exceptionLevel=s.API_ERROR,this.type=c.API_ERROR,this.exceptionReason=r,this.exceptionSourceUrl=window.location.href,this.payload.apiCgi=e.url,this.payload.apiLevel=t?2:1,this.payload.costTime=e.elapsedTime,this.payload.sendWay=e.type,this.payload.httpCode=e.status,this.payload.method=e.method,this.recordError(),this.handleBlank("H5_api异常报错检测:"+r)}},n}(H),Y=R()?G:X;return function(){function e(e){this.environment="production",this.isOpenJsError=!0,this.isOpenPerformance=!0,this.isOpenBlankError=!0,this.isOpenApiError=!0,this.debug=!1;var t=this;this.options=e;var n;n=W.location.href,/((2(5[0-5]|[0-4]\d))|[0-1]?\d{1,2})(\.((2(5[0-5]|[0-4]\d))|[0-1]?\d{1,2})){3}|localhost/g.test(n);Object.keys(e).forEach((function(n){t[n]=e[n]})),this.log=new U(e),this.init()}return e.prototype.initVue=function(e){e&&new V(this.options).handleError(e)},e.prototype.init=function(){this.isOpenJsError&&(new J(this.options).handleError(),new Q(this.options).handleError(),new K(this.options).handleError()),this.isOpenApiError&&new Y(this.options).handleError(),this.options.Vue&&new V(this.options).handleError(this.options.Vue),this.isOpenPerformance&&this.monitorPerformance(this.options),this.isOpenBlankError&&new q(this.options).handleError()},e.prototype.monitorPerformance=function(e){e=e||{};var t=function(){setTimeout((function(){new j(e).record()}),500)},n=W.onload;W.onload=function(e){n&&"function"==typeof n&&n(e),setTimeout(t)}},e}()}));
//# sourceMappingURL=minix-monitor.umd.js.map
